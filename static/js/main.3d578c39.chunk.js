(window["webpackJsonpatm-app"]=window["webpackJsonpatm-app"]||[]).push([[0],{15:function(e,t,n){e.exports=n.p+"static/media/logo.25bf045c.svg"},16:function(e,t,n){e.exports=n(30)},27:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(4),c=n.n(o),u=n(5),i=n(2),s=n(12),l=(n(26),n(13));function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(n,!0).forEach(function(t){Object(l.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var d={cash:{fives:{amount:4,value:5},tens:{amount:15,value:10},twenties:{amount:7,value:20}},user:{authorised:!1,balance:null,pin:"",error:"",withdrawAmount:""}},f=Object(i.combineReducers)({ATM:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0,n=function(){switch(t.type){case"PIN_ENTRY":return{v:m({},e,{user:m({},e.user,{pin:e.user.pin.concat(t.payload)})})};case"PIN_CONFIRMED":return{v:m({},e,{user:m({},e.user,{authorised:!0,balance:t.payload,pin:""})})};case"PIN_CLEAR":return{v:m({},e,{user:m({},e.user,{pin:""})})};case"PIN_ERROR":return{v:m({},e,{user:m({},e.user,{error:t.payload,pin:""})})};case"WITHDRAW_ENTRY":return{v:m({},e,{user:m({},e.user,{withdrawAmount:e.user.withdrawAmount.concat(t.payload)})})};case"WITHDRAW_CASH":for(var n=JSON.parse(JSON.stringify(e.cash)),r=0;r!==Number(e.user.withdrawAmount);){var a=Object.keys(n).reduce(function(e,t){return n[e].amount>n[t].amount?e:t});if(r+=n[a].value,n[a].amount--,r>e.user.withdrawAmount){r-=n[a].value,n[a].amount++;var o=e.user.withdrawAmount-r;if(o===n.tens.value&&n.tens.amount>0)r+=n.tens.value,n.tens.amount--;else{if(!(o===n.fives.value&&n.fives.amount>0))return{v:m({},e,{user:m({},e.user,{error:"Amount not available"})})};r+=n.fives.value,n.fives.amount--}}}return{v:m({},e,{cash:n,user:m({},e.user,{balance:e.user.balance-e.user.withdrawAmount,withdrawAmount:""})})};case"WITHDRAW_CLEAR":return{v:m({},e,{user:m({},e.user,{withdrawAmount:0})})};case"WITHDRAW_ERROR":return{v:m({},e,{user:m({},e.user,{error:"Cannot be overdrawn by more than \xa3100"})})};case"CLEAR_ERROR":return{v:m({},e,{user:m({},e.user,{error:""})})};case"CANCEL":return{v:d};default:return{v:e}}}();if("object"===typeof n)return n.v}}),v=Object(i.createStore)(f,{},Object(i.applyMiddleware)(s.a)),w=(n(27),n(9)),h=n.n(w),E=n(14),y=function(e){return a.a.createElement("div",{className:"num ".concat(0===e.value?"zero":""),"data-value":e.value,onClick:e.onClick},e.value)},A=n(15),b=n.n(A),R=(n(29),Object(u.b)(function(e){return{pin:e.ATM.user.pin,authorised:e.ATM.user.authorised,balance:e.ATM.user.balance,withdrawAmount:e.ATM.user.withdrawAmount,error:e.ATM.user.error}},function(e){return{pinEntry:function(t){return e((n="".concat(t.target.dataset.value),function(e){e({type:"PIN_ENTRY",payload:n})}));var n},confirmPin:function(t){return e(function(e){return function(){var t=Object(E.a)(h.a.mark(function t(n){return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://frontend-challenge.screencloud-michael.now.sh/api/pin/",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify({pin:e})}).then(function(e){return e.json()}).then(function(e){e.error?n({type:"PIN_ERROR",payload:e.error}):n({type:"PIN_CONFIRMED",payload:e.currentBalance})});case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}(t))},withdrawEntry:function(t){return e((n=t.target.dataset.value,function(e){e({type:"WITHDRAW_ENTRY",payload:n})}));var n},withdraw:function(t,n){e(t-n<-100?function(e){e({type:"WITHDRAW_ERROR"})}:function(e){return function(t){t({type:"WITHDRAW_CASH",payload:e})}}(n))},clearWithdraw:function(){return e(function(e){e({type:"WITHDRAW_CLEAR"})})},clearPin:function(){return e(function(e){e({type:"PIN_CLEAR"})})},cancel:function(){return e(function(e){e({type:"CANCEL"})})},clearError:function(){return e(function(e){e({type:"CLEAR_ERROR"})})}}})(function(e){return a.a.createElement("div",{className:"App"},a.a.createElement("header",{className:"App-header"},a.a.createElement("img",{src:b.a,className:"App-logo",alt:"logo"}),a.a.createElement("p",null,"React ATM")),a.a.createElement("div",{className:"atm"},a.a.createElement("div",{className:"display"},e.authorised?a.a.createElement("code",{className:"balance"},"Current Balance: \xa3",e.balance):null,e.balance<0?a.a.createElement("code",{className:"balance-warning"},"OVERDRAWN \ud83e\udd15"):null,a.a.createElement("code",{className:"mainDisplay"},function(e){return e.error?(setTimeout(function(){e.clearError()},3e3),e.error):e.pin.length>0?"*".repeat(e.pin.length):e.authorised?"Enter withdraw amount: ".concat(e.withdrawAmount):"Enter PIN"}(e))),a.a.createElement("div",{className:"inputs"},a.a.createElement("div",{className:"numbers"},Array.from(Array(10),function(t,n){return a.a.createElement(y,{key:n,value:n,onClick:e.authorised?e.withdrawEntry:e.pinEntry})})),a.a.createElement("div",{className:"buttons"},a.a.createElement("p",{onClick:e.cancel,className:"button cancel"},"CANCEL"),a.a.createElement("p",{onClick:e.pin.length>0?e.clearPin:e.clearWithdraw,className:"button clear"},"CLEAR"),a.a.createElement("p",{onClick:e.authorised?function(){return e.withdraw(e.balance,e.withdrawAmount)}:function(){return e.confirmPin(e.pin)},className:"button enter"},"ENTER")))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(u.a,{store:v},a.a.createElement(R,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[16,1,2]]]);
//# sourceMappingURL=main.3d578c39.chunk.js.map